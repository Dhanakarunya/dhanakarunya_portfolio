<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>IOT Based RFID</title>
  <meta name="description" content="">
  <meta name="keywords" content="">

   
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

   
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&family=Playfair+Display:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">

   
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">

   
  <link href="assets/css/main.css" rel="stylesheet">

  <style>
    .code-container {
        position: relative;
        width: 100%;
        background: #ffffff; /* changed to white */
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); /* softer shadow for white bg */
    }

    .code-header {
        display: flex;
        justify-content: space-between;
        padding: 10px;
        background: #f0f0f0; /* light gray header */
        color: #333; /* dark text */
        font-size: 14px;
    }

    pre {
        margin: 0;
        padding: 15px;
        overflow-x: auto;
        background: #ffffff; /* ensure pre area is also white */
        color: #000; /* black text for contrast */
        font-family: Consolas, monospace;
        font-size: 14px;
    }
</style>


 
</head>

<body class="portfolio-details-page">

  <header id="header" class="header d-flex align-items-center fixed-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center justify-content-between">

      <a href="index.html" class="logo d-flex align-items-center">
         
         
        <h1 class="sitename">Dhanakarunya S</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="#hero">Home</a></li>
          <li><a href="#about">About</a></li>
          <li><a href="#portfolio" class="active">Assignment</a></li>
          <li><a href="#contact">Contact</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

    </div>
  </header>

  <main class="main">

    <div class="page-title dark-background">
      <div class="container position-relative">
        <h1>IoT-Based RFID Access Control System with Real-Time Logging to Google Sheets</h1>
      </div>
    </div> 

     
    <section id="portfolio-details" class="portfolio-details section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">

        <h2>INTERFACE RFID WITH ESP32</h2>
        <br>
        <h3>RC522 RFID:</h3>
        <br>
        <table class="table">
                <thead>
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">RC522 Pin</th>
                    <th scope="col">ESP32 Pin</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                    <th scope="row">1</th>
                    <td>SDA</td>
                    <td>GPIO5</td>
                    </tr>
                    <tr>
                    <th scope="row">2</th>
                    <td>SCK</td>
                    <td>GPIO18</td>
                    </tr>
                    <tr>
                    <th scope="row">3</th>
                    <td>MOSI</td>
                    <td>GPIO23</td>
                    </tr>
                    <tr>
                    <th scope="row">4</th>
                    <td>MISO</td>
                    <td>GPIO19</td>
                    </tr>
                    <tr>
                    <th scope="row">5</th>
                    <td>RST</td>
                    <td>GPIO4</td>
                    </tr>
                    <tr>
                    <th scope="row">6</th>
                    <td>VCC</td>
                    <td>3.3V</td>
                    </tr>
                    <tr>
                    <th scope="row">7</th>
                    <td>GND</td>
                    <td>GND</td>
                    </tr>
                </tbody>
                </table>
                <br>
        <h3>LED:</h3>
        <br>
        <table class="table">
            <thead>
                <tr>
                <th scope="col">#</th>
                <th scope="col">LED Pin</th>
                <th scope="col">Connection</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <th scope="row">1</th>
                <td>Anode (long leg)</td>
                <td>→ 220Ω resistor → GPIO2</td>
                </tr>
                <tr>
                <th scope="row">2</th>
                <td>Cathode</td>
                <td>→ GND</td>
                </tr>
            </tbody>
            </table>
        <br>
        <h3>Buzzer:</h3>
        <br>
        <table class="table">
            <thead>
                <tr>
                <th scope="col">#</th>
                <th scope="col">Terminal</th>
                <th scope="col">Connection</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <th scope="row">1</th>
                <td>Positive (+)</td>
                <td>→ GPIO15</td>
                </tr>
                <tr>
                <th scope="row">2</th>
                <td>Negative (–)</td>
                <td>→ GND</td>
                </tr>
            </tbody>
            </table>
        <h3>CODE:</h3>
        <br>
        <div class="code-container">
  <div class="code-header">
    <span>Code</span>
  </div>
  <pre><code class="language-cpp">
#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;

#define SS_PIN 5
#define RST_PIN 4
#define LED_PIN 2
#define BUZZER_PIN 15

MFRC522 mfrc522(SS_PIN, RST_PIN);
byte validUID[4] = {0xDE, 0xAD, 0xBE, 0xEF};

void setup() {
  Serial.begin(115200);
  SPI.begin();
  mfrc522.PCD_Init();
  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);
}

void loop() {
  if (!mfrc522.PICC_IsNewCardPresent() || !mfrc522.PICC_ReadCardSerial()) {
    return;
  }

  if (isUIDMatch(mfrc522.uid.uidByte, validUID)) {
    blinkAndBeep(LED_PIN, BUZZER_PIN, 1, 200);
    Serial.println("Valid User");
  } else {
    blinkAndBeep(LED_PIN, BUZZER_PIN, 3, 200);
    Serial.println("Unknown User");
  }

  mfrc522.PICC_HaltA();
}

bool isUIDMatch(byte *a, byte *b) {
  for (byte i = 0; i &lt; 4; i++) {
    if (a[i] != b[i]) return false;
  }
  return true;
}

void blinkAndBeep(int ledPin, int buzzerPin, int times, int delayTime) {
  for (int i = 0; i &lt; times; i++) {
    digitalWrite(ledPin, HIGH);
    digitalWrite(buzzerPin, HIGH);
    delay(delayTime);
    digitalWrite(ledPin, LOW);
    digitalWrite(buzzerPin, LOW);
    delay(delayTime);
  }
}
  </code></pre>
</div>
            <br>
            <h3>OUTPUT</h3>
 
            <video controls width="1080" height="720">
                <source src="assets/img/protosem/rfid/buzzer.mp4" type="video/mp4">
                Your browser does not support the video tag.
                </video>
            <br>
            <br>
            <h2>To replace that dummy UID with your actual RFID tag’s UID, follow these steps:</h2>
            <br>
            <h3>1.Read your tag’s UID:</h3>
            <br>
            <p>Upload this minimal sketch to your ESP32:</p>
            <br>
            <div class="code-container">
  <div class="code-header">
    <span>Code</span>
  </div>
  <pre><code class="language-cpp">
#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;

#define SS_PIN 5   // SDA pin (connect to D5 on ESP32 or pin 10 on Arduino Uno)
#define RST_PIN 4  // RST pin (connect to D4 on ESP32 or pin 9 on Arduino Uno)

MFRC522 mfrc522(SS_PIN, RST_PIN); // Create MFRC522 instance

void setup() {
  Serial.begin(115200);       // Start serial communication
  SPI.begin();                // Init SPI bus
  mfrc522.PCD_Init();         // Init MFRC522
  Serial.println("Scan your card...");
}

void loop() {
  // Look for a new card
  if (!mfrc522.PICC_IsNewCardPresent() || !mfrc522.PICC_ReadCardSerial()) {
    return;
  }

  // Show UID
  Serial.print("UID: ");
  for (byte i = 0; i &lt; mfrc522.uid.size; i++) {
    Serial.print("0x");
    if (mfrc522.uid.uidByte[i] &lt; 0x10) {
      Serial.print("0");
    }
    Serial.print(mfrc522.uid.uidByte[i], HEX);
    Serial.print(" ");
  }
  Serial.println();
  delay(1000); // Add delay to avoid flooding the output
}
  </code></pre>
</div>

              <br>
            <video controls width="1080" height="720">
                <source src="assets/img/protosem/rfid/UID.mp4" type="video/mp4">
                Your browser does not support the video tag.
                </video>
            <br>

            <video controls width="1080" height="720">
                <source src="assets/img/protosem/rfid/CI UID (1).mp4" type="video/mp4">
                Your browser does not support the video tag.
                </video>
                <br>
                <br>
            <h3>Updated Full Code with LED & Buzzer for both Authorized and Unauthorized Cards:</h3>
            <br>
            
            <div class="code-container">
  <div class="code-header">
    <span>Code</span>
  </div>
  <pre><code class="language-cpp">
#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;

#define SS_PIN 5
#define RST_PIN 4
#define LED_PIN 2
#define BUZZER_PIN 15

MFRC522 mfrc522(SS_PIN, RST_PIN);

// Your known UID
byte knownUID[] = { 0xED, 0x0D, 0x0C, 0x32 };

void setup() {
  Serial.begin(115200);
  SPI.begin();
  mfrc522.PCD_Init();

  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);
  digitalWrite(LED_PIN, LOW);
  digitalWrite(BUZZER_PIN, LOW);

  Serial.println("Scan your card...");
}

void loop() {
  if (!mfrc522.PICC_IsNewCardPresent() || !mfrc522.PICC_ReadCardSerial()) {
    return;
  }

  Serial.print("Scanned UID: ");
  bool match = true;

  for (byte i = 0; i &lt; mfrc522.uid.size; i++) {
    Serial.print("0x");
    if (mfrc522.uid.uidByte[i] &lt; 0x10) Serial.print("0");
    Serial.print(mfrc522.uid.uidByte[i], HEX);
    Serial.print(" ");

    if (mfrc522.uid.uidByte[i] != knownUID[i]) {
      match = false;
    }
  }

  Serial.println();

  if (match) {
    Serial.println("✅ Authorized card detected!");
    digitalWrite(LED_PIN, HIGH);
    digitalWrite(BUZZER_PIN, HIGH);
    delay(500); // 0.5 sec ON
    digitalWrite(LED_PIN, LOW);
    digitalWrite(BUZZER_PIN, LOW);
  } else {
    Serial.println("❌ Unauthorized card!");
    for (int i = 0; i &lt; 3; i++) {
      digitalWrite(LED_PIN, HIGH);
      digitalWrite(BUZZER_PIN, HIGH);
      delay(200);
      digitalWrite(LED_PIN, LOW);
      digitalWrite(BUZZER_PIN, LOW);
      delay(200);
    }
  }

  // Halt PICC and stop encryption
  mfrc522.PICC_HaltA();
  mfrc522.PCD_StopCrypto1();

  delay(1000); // Pause before next scan
}
  </code></pre>
</div>

              <br>
              <video controls width="1080" height="720">
                <source src="assets/img/protosem/rfid/RFID.mp4" type="video/mp4">
                Your browser does not support the video tag.
                </video>
                <br>
                <br>
              <h3>3.INTERFACE WITH LCD DISPLAY</h3>
              <br>
              <p>Components Needed</p>
              <ul>
                <li><i><span>16x2 LCD (with or without I2C module)</span></i></li>
                <li><i><span>RFID-RC522 module</span></i></li>
                <li><i><span>ESP32</span></i></li>
                <li><i><span>LED (GPIO 2), Buzzer (GPIO 15)</span></i></li>
                <li><i><span>Jumper wires</span></i></li>

              </ul>
              <br>
               <div class="code-container">
  <div class="code-header">
    <span>Code</span>
  </div>
  <pre><code class="language-cpp">
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;
#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;

// --- Pin Definitions ---
#define SS_PIN 5         // RFID SS (SDA)
#define RST_PIN 4        // RFID RST
#define LED_PIN 2        // On-board LED
#define BUZZER_PIN 15    // Buzzer pin

// --- Initialize RFID and LCD ---
LiquidCrystal_I2C lcd(0x27, 16, 2);          // LCD at I2C address 0x27
MFRC522 mfrc522(SS_PIN, RST_PIN);           // RFID module

// --- Your Card UID ---
byte knownUID[] = { 0xED, 0x0D, 0x0C, 0x32 }; // Your UID (4 bytes)

void setup() {
  Serial.begin(115200);          // Open serial communication
  SPI.begin();                   // Init SPI for RFID
  mfrc522.PCD_Init();            // Init MFRC522

  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);

  // Initialize I2C for ESP32 and LCD
  Wire.begin(21, 22);            // SDA = 21, SCL = 22
  lcd.begin();                   // Initialize LCD
  lcd.backlight();               // Turn on LCD backlight

  // Welcome message
  lcd.setCursor(0, 0);
  lcd.print("Scan your card");
}

void loop() {
  // Wait for a new card
  if (!mfrc522.PICC_IsNewCardPresent() || !mfrc522.PICC_ReadCardSerial()) {
    return;
  }

  bool match = true;
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("UID: ");

  // Display UID & compare
  for (byte i = 0; i &lt; mfrc522.uid.size; i++) {
    lcd.print(mfrc522.uid.uidByte[i], HEX);
    if (i &lt; mfrc522.uid.size - 1) lcd.print(":");
    if (mfrc522.uid.uidByte[i] != knownUID[i]) {
      match = false;
    }
  }

  lcd.setCursor(0, 1);
  if (match) {
    Serial.println("✅ Authorized card");
    lcd.print("Access: Granted");
    digitalWrite(LED_PIN, HIGH);
    digitalWrite(BUZZER_PIN, HIGH);
    delay(500);
    digitalWrite(LED_PIN, LOW);
    digitalWrite(BUZZER_PIN, LOW);
  } else {
    Serial.println("❌ Unauthorized card");
    lcd.print("Access: Denied");
    for (int i = 0; i &lt; 3; i++) {
      digitalWrite(LED_PIN, HIGH);
      digitalWrite(BUZZER_PIN, HIGH);
      delay(200);
      digitalWrite(LED_PIN, LOW);
      digitalWrite(BUZZER_PIN, LOW);
      delay(200);
    }
  }

  // End communication with current card
  mfrc522.PICC_HaltA();
  mfrc522.PCD_StopCrypto1();

  delay(1000); // Pause before next scan
}
</code></pre>
</div>

              <br>
              <video controls width="1080" height="720">
                <source src="assets/img/protosem/rfid/CI UID (1).mp4" type="video/mp4">
                Your browser does not support the video tag.
                </video>
                <br>
                <br>
            <h3>4.SERVO INTERFACE WITH ALL</h3>
            <br>
            <table class="table">
            <thead>
                <tr>
                <th scope="col">#</th>
                <th scope="col">Servo Wire</th>
                <th scope="col">Connects to</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                <th scope="row">1</th>
                <td>Orange (Signal)</td>
                <td>GPIO 13 of ESP32</td>
                </tr>
                <tr>
                <th scope="row">2</th>
                <td>Red (VCC)</td>
                <td>5V (External Power Supply)</td>
                </tr>
                <tr>
                <th scope="row">3</th>
                <td>Brown (GND)</td>
                <td>Common GND with ESP32 &amp; Power Supply</td>
                </tr>
            </tbody>
            </table>
            <br>
            <p>Note : Do not power the servo directly from ESP32’s 3.3V pin — it may reset or get damaged.</p>
            <br>
            <div class="code-container">
  <div class="code-header">
    <span>Code</span>
  </div>
  <pre><code class="language-cpp">
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;
#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;
#include &lt;ESP32Servo.h&gt;

#define SS_PIN 5
#define RST_PIN 4
#define LED_PIN 2
#define BUZZER_PIN 15
#define SERVO_PIN 13

byte knownUID[] = { 0xED, 0x0D, 0x0C, 0x32 };

LiquidCrystal_I2C lcd(0x27, 16, 2);
MFRC522 mfrc522(SS_PIN, RST_PIN);
Servo gateServo;

void setup() {
  Serial.begin(115200);
  SPI.begin();
  mfrc522.PCD_Init();

  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);

  lcd.begin();
  lcd.backlight();
  lcd.setCursor(0, 0);
  lcd.print("Scan your card");

  gateServo.setPeriodHertz(50);
  gateServo.attach(SERVO_PIN, 500, 2400); // Signal pin for servo
  gateServo.write(0); // Start at 0°
}

void loop() {
  if (!mfrc522.PICC_IsNewCardPresent() || !mfrc522.PICC_ReadCardSerial()) {
    return;
  }

  bool match = true;
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("UID: ");

  for (byte i = 0; i &lt; mfrc522.uid.size; i++) {
    lcd.print(mfrc522.uid.uidByte[i], HEX);
    if (i &lt; mfrc522.uid.size - 1) lcd.print(":");
    if (mfrc522.uid.uidByte[i] != knownUID[i]) match = false;
  }

  if (match) {
    Serial.println("✅ Access Granted");
    lcd.setCursor(0, 1);
    lcd.print("Access: Granted");

    digitalWrite(LED_PIN, HIGH);
    digitalWrite(BUZZER_PIN, HIGH);
    gateServo.write(180); // Open gate
    delay(500);

    digitalWrite(LED_PIN, LOW);
    digitalWrite(BUZZER_PIN, LOW);
    delay(3000);
    gateServo.write(0); // Close gate
  } else {
    Serial.println("❌ Access Denied");
    lcd.setCursor(0, 1);
    lcd.print("Access: Denied");

    for (int i = 0; i &lt; 3; i++) {
      digitalWrite(LED_PIN, HIGH);
      digitalWrite(BUZZER_PIN, HIGH);
      delay(200);
      digitalWrite(LED_PIN, LOW);
      digitalWrite(BUZZER_PIN, LOW);
      delay(200);
    }
    gateServo.write(0); // Keep gate closed
  }

  mfrc522.PICC_HaltA();
  mfrc522.PCD_StopCrypto1();
  delay(1000);
}
</code></pre>
</div>

              <br>
              <video controls width="1080" height="720">
                <source src="assets/img/protosem/rfid/UID3.mp4" type="video/mp4">
                Your browser does not support the video tag.
                </video>
                <br>
                <br>
              <h3>5.RTC MODULE INTERFACE WITH ALL:</h3>
              <br>
              <p>DS1302 RTC Module ⟷ ESP32 Wiring</p>
              <br>
              <table class="table">
                <thead>
                    <tr>
                    <th scope="col">#</th>
                    <th scope="col">DS1302 Pin</th>
                    <th scope="col">ESP32 Pin</th>
                    <th scope="col">Description</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                    <th scope="row">1</th>
                    <td>VCC</td>
                    <td>3.3V</td>
                    <td>Power supply</td>
                    </tr>
                    <tr>
                    <th scope="row">2</th>
                    <td>GND</td>
                    <td>GND</td>
                    <td>Ground</td>
                    </tr>
                    <tr>
                    <th scope="row">3</th>
                    <td>CLK</td>
                    <td>GPIO14</td>
                    <td>Clock</td>
                    </tr>
                    <tr>
                    <th scope="row">4</th>
                    <td>DAT</td>
                    <td>GPIO19</td>
                    <td>Data I/O</td>
                    </tr>
                    <tr>
                    <th scope="row">5</th>
                    <td>RST</td>
                    <td>GPIO5</td>
                    <td>Chip Enable (CE)</td>
                    </tr>
                </tbody>
                </table>
            <div class="code-container">
  <div class="code-header">
    <span>Code</span>
  </div>
  <pre><code class="language-cpp">
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;
#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;
#include &lt;ESP32Servo.h&gt;
#include &lt;ThreeWire.h&gt;
#include &lt;RtcDS1302.h&gt;

#define SS_PIN       5
#define RST_PIN      4
#define LED_PIN      2
#define BUZZER_PIN   15
#define SERVO_PIN    13

#define DS1302_CLK   14 // SCLK
#define DS1302_IO    27 // DAT
#define DS1302_CE    26 // RST

byte knownUID[] = { 0xED, 0x0D, 0x0C, 0x32 };

LiquidCrystal_I2C lcd(0x27, 16, 2);
MFRC522 mfrc522(SS_PIN, RST_PIN);
Servo gateServo;

// RTC Wiring: IO, SCLK, CE
ThreeWire myWire(DS1302_IO, DS1302_CLK, DS1302_CE);
RtcDS1302&lt;ThreeWire&gt; Rtc(myWire);

void setup() {
  Serial.begin(115200);
  SPI.begin();
  mfrc522.PCD_Init();

  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);

  lcd.begin();
  lcd.backlight();
  lcd.setCursor(0, 0);
  lcd.print("Scan your card");

  gateServo.setPeriodHertz(50);
  gateServo.attach(SERVO_PIN, 500, 2400);
  gateServo.write(0);

  // RTC Setup
  Rtc.Begin();
  RtcDateTime customTime(2025, 4, 19, 15, 45, 00); // YYYY, MM, DD, HH, MM, SS
  Rtc.SetDateTime(customTime);

  if (!Rtc.IsDateTimeValid()) {
    Serial.println("RTC lost confidence in the DateTime!");
  }

  if (!Rtc.GetIsRunning()) {
    Serial.println("RTC was not running. Starting it now...");
    Rtc.SetIsRunning(true);
  }

  RtcDateTime now = Rtc.GetDateTime();
  printDateTime(now);
}

void loop() {
  if (!mfrc522.PICC_IsNewCardPresent() || !mfrc522.PICC_ReadCardSerial()) {
    return;
  }

  bool match = true;
  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("UID: ");

  for (byte i = 0; i &lt; mfrc522.uid.size; i++) {
    lcd.print(mfrc522.uid.uidByte[i], HEX);
    if (i &lt; mfrc522.uid.size - 1) lcd.print(":");
    if (mfrc522.uid.uidByte[i] != knownUID[i]) match = false;
  }

  if (match) {
    Serial.println("✅ Access Granted");
    lcd.setCursor(0, 1);
    lcd.print("Access: Granted");

    digitalWrite(LED_PIN, HIGH);
    digitalWrite(BUZZER_PIN, HIGH);
    gateServo.write(180); // Open gate
    delay(500);

    digitalWrite(LED_PIN, LOW);
    digitalWrite(BUZZER_PIN, LOW);
    delay(3000);
    gateServo.write(0); // Close gate
  } else {
    Serial.println("❌ Access Denied");
    lcd.setCursor(0, 1);
    lcd.print("Access: Denied");

    for (int i = 0; i &lt; 3; i++) {
      digitalWrite(LED_PIN, HIGH);
      digitalWrite(BUZZER_PIN, HIGH);
      delay(200);
      digitalWrite(LED_PIN, LOW);
      digitalWrite(BUZZER_PIN, LOW);
      delay(200);
    }

    gateServo.write(0); // Keep gate closed
  }

  // Get current time from RTC
  RtcDateTime now = Rtc.GetDateTime();
  printDateTime(now);

  mfrc522.PICC_HaltA();
  mfrc522.PCD_StopCrypto1();
  delay(1000);
}

void printDateTime(const RtcDateTime&amp; dt) {
  char datestring[20];
  snprintf_P(datestring,
             sizeof(datestring),
             PSTR("%02u/%02u/%04u %02u:%02u:%02u"),
             dt.Month(),
             dt.Day(),
             dt.Year(),
             dt.Hour(),
             dt.Minute(),
             dt.Second());
  Serial.println(datestring);
}
</code></pre>
</div>

              <br>
              <video controls width="1080" height="720">
                <source src="assets/img/protosem/rfid/UID4.mp4" type="video/mp4">
                Your browser does not support the video tag.
                </video>
                <br>
                <br>
              <h3>Google Apps Script (Web App)</h3>
              <br>
              <p>This script receives data (e.g., UID, timestamp) via HTTP POST and logs it to a Google Sheet.</p>
              <br>
              <p>
                Create Script:
              </p>
              <ol>
                <li><i><span></span></i>Go to <a href="https://script.google.com" target="_blank">https://script.google.com</a></li>
                <li><i><span></span></i>Click <strong>New Project</strong></li>
                <li><i><span></span></i>Paste the following code</li>
                <li><i><span></span></i>Click <strong>File &gt; Save</strong>, name the project</li>
                <li><i><span></span></i>Replace <code>"YOUR_SPREADSHEET_ID"</code> with your actual Sheet ID (from URL)</li>
                <li><i><span></span></i>Go to <strong>Deploy &gt; Manage Deployments &gt; New deployment</strong></li>
                <li><i><span></span></i>Click <strong>Deploy</strong>, then <strong>Authorize</strong>, and copy the <strong>Web App URL</strong><br>
                    Example: <code>https://script.google.com/macros/s/AKf.../exec</code>
                </li>
             </ol>
             <br>
              <div class="code-container">
                  <div class="code-header">
                      <span>Code</span>
                      
                  </div>
                  <pre><code class="language-cpp">
                   
                        function doPost(e) {
                        var ss = SpreadsheetApp.openById("YOUR_SPREADSHEET_ID");
                        var sheet = ss.getSheetByName("Sheet1");

                        // Get data from POST request
                        var uid = e.parameter.uid;
                        var status = e.parameter.status;
                        var timestamp = new Date();

                        // Append data to sheet
                        sheet.appendRow([timestamp, uid, status]);

                        return ContentService.createTextOutput("Success");
                        }

  
                  </code></pre>
              </div>
              <br>
              <h2>ESP32 Arduino Code (HTTP POST Request)</h2>
              <br>
              <div class="code-container">
  <div class="code-header">
    <span>Code</span>
  </div>
  <pre><code class="language-cpp">
#include &lt;Wire.h&gt;
#include &lt;LiquidCrystal_I2C.h&gt;
#include &lt;SPI.h&gt;
#include &lt;MFRC522.h&gt;
#include &lt;ESP32Servo.h&gt;
#include &lt;ThreeWire.h&gt;
#include &lt;RtcDS1302.h&gt;
#include &lt;WiFi.h&gt;
#include &lt;HTTPClient.h&gt;

// ---------------------- Pins & Constants ----------------------
#define SS_PIN       5
#define RST_PIN      4
#define LED_PIN      2
#define BUZZER_PIN   15
#define SERVO_PIN    13

#define DS1302_CLK   14  // SCLK
#define DS1302_IO    27  // DAT
#define DS1302_CE    26  // RST

byte knownUID[] = { 0xED, 0x0D, 0x0C, 0x32 };

// ---------------------- Components ----------------------
LiquidCrystal_I2C lcd(0x27, 16, 2);
MFRC522 mfrc522(SS_PIN, RST_PIN);
Servo gateServo;
ThreeWire myWire(DS1302_IO, DS1302_CLK, DS1302_CE);
RtcDS1302&lt;ThreeWire&gt; Rtc(myWire);

// ---------------------- Wi-Fi Setup ----------------------
const char* ssid = "YOUR_WIFI_SSID";             // &lt;-- Change this
const char* password = "YOUR_WIFI_PASSWORD";     // &lt;-- Change this
const String scriptURL = "https://script.google.com/macros/s/XXXXXXXXXXXX/exec";  // &lt;-- Your Script URL

// ---------------------- Setup ----------------------
void setup() {
  Serial.begin(115200);
  SPI.begin();
  mfrc522.PCD_Init();

  pinMode(LED_PIN, OUTPUT);
  pinMode(BUZZER_PIN, OUTPUT);

  lcd.begin();
  lcd.backlight();
  lcd.setCursor(0, 0);
  lcd.print("Scan your card");

  gateServo.setPeriodHertz(50);
  gateServo.attach(SERVO_PIN, 500, 2400);
  gateServo.write(0);

  // RTC setup
  Rtc.Begin();
  RtcDateTime customTime(2025, 4, 19, 15, 45, 00); // Set initial time
  Rtc.SetDateTime(customTime);

  if (!Rtc.IsDateTimeValid()) {
    Serial.println("RTC DateTime invalid!");
  }
  if (!Rtc.GetIsRunning()) {
    Serial.println("Starting RTC...");
    Rtc.SetIsRunning(true);
  }

  // Wi-Fi connect
  WiFi.begin(ssid, password);
  Serial.print("Connecting to WiFi");
  while (WiFi.status() != WL_CONNECTED) {
    delay(500);
    Serial.print(".");
  }
  Serial.println("\nWiFi connected.");
}

// ---------------------- Main Loop ----------------------
void loop() {
  if (!mfrc522.PICC_IsNewCardPresent() || !mfrc522.PICC_ReadCardSerial()) {
    return;
  }

  bool match = true;
  String uidStr = "";

  lcd.clear();
  lcd.setCursor(0, 0);
  lcd.print("UID: ");

  for (byte i = 0; i < mfrc522.uid.size; i++) {
    byte val = mfrc522.uid.uidByte[i];
    uidStr += String(val, HEX);
    lcd.print(val, HEX);
    if (i < mfrc522.uid.size - 1) {
      lcd.print(":");
      uidStr += ":";
    }
    if (val != knownUID[i]) match = false;
  }

  uidStr.toUpperCase(); // Optional

  if (match) {
    Serial.println("✅ Access Granted");
    lcd.setCursor(0, 1);
    lcd.print("Access: Granted");
    digitalWrite(LED_PIN, HIGH);
    digitalWrite(BUZZER_PIN, HIGH);
    gateServo.write(180);
    delay(500);
    digitalWrite(LED_PIN, LOW);
    digitalWrite(BUZZER_PIN, LOW);
    delay(3000);
    gateServo.write(0);
    sendToGoogleSheet(uidStr, "Granted");
  } else {
    Serial.println("❌ Access Denied");
    lcd.setCursor(0, 1);
    lcd.print("Access: Denied");
    for (int i = 0; i < 3; i++) {
      digitalWrite(LED_PIN, HIGH);
      digitalWrite(BUZZER_PIN, HIGH);
      delay(200);
      digitalWrite(LED_PIN, LOW);
      digitalWrite(BUZZER_PIN, LOW);
      delay(200);
    }
    sendToGoogleSheet(uidStr, "Denied");
  }

  RtcDateTime now = Rtc.GetDateTime();
  printDateTime(now);

  mfrc522.PICC_HaltA();
  mfrc522.PCD_StopCrypto1();
  delay(1000);
}

// ---------------------- Send to Google Sheet ----------------------
void sendToGoogleSheet(String uid, String status) {
  if (WiFi.status() == WL_CONNECTED) {
    HTTPClient http;
    String fullURL = scriptURL + "?uid=" + uid + "&status=" + status;
    http.begin(fullURL);
    int httpCode = http.GET();
    if (httpCode > 0) {
      Serial.print("Data sent: ");
      Serial.println(httpCode);
    } else {
      Serial.print("Failed to send. Code: ");
      Serial.println(httpCode);
    }
    http.end();
  } else {
    Serial.println("WiFi not connected");
  }
}

// ---------------------- Print RTC Time ----------------------
void printDateTime(const RtcDateTime&amp; dt) {
  char buf[20];
  snprintf_P(buf, sizeof(buf), PSTR("%02u/%02u/%04u %02u:%02u:%02u"),
    dt.Month(), dt.Day(), dt.Year(),
    dt.Hour(), dt.Minute(), dt.Second());
  Serial.println(buf);
}
</code></pre>
</div>

              


                

      
      </div>

    </section> 

  </main>

  <footer id="footer" class="footer light-background">
    <div class="container">
      
      <div class="social-links d-flex justify-content-center">
        <a href=""><i class="bi bi-twitter-x"></i></a>
        <a href=""><i class="bi bi-facebook"></i></a>
        <a href=""><i class="bi bi-instagram"></i></a>
        <a href=""><i class="bi bi-skype"></i></a>
        <a href=""><i class="bi bi-linkedin"></i></a>
      </div>
    </div>
  </footer>

  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  
  <div id="preloader"></div>

  
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/typed.js/typed.umd.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/imagesloaded/imagesloaded.pkgd.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>

  
  <script src="assets/js/main.js"></script>

</body>

</html>